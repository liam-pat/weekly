---
import ThemeSwitch from './ThemeSwitch.astro';
---

<ThemeSwitch />

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/heti/0.9.6/heti-addon.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/intense-images/1.0.7/intense.min.js"></script>

<!-- This is intentionally inlined to avoid FOUC -->
<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    // Optimization of letter spacing
    const heti = new Heti('.heti');
    heti.autoSpacing();

    // Lazy loading of images
    const observer = lozad('.lozad', {
      loaded: (el) => {
        el.alt = el.getAttribute('data-alt');
      },
    });
    observer.observe();

    // Open external links in a new tab
    Array.from(document.links).forEach((link) => {
      if (link.hostname !== window.location.hostname) {
        link.target = '_blank';
      }
    });

    // Image zoom for non-mobile devices
    const zoomImgs = document.querySelectorAll('#write img');
    if (zoomImgs.length > 0 && !/Android|iPhone/i.test(navigator.userAgent)) {
      Intense && Intense(zoomImgs);
    }
  });
</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5SYETYN5QF" is:inline></script>
<script>
  // @ts-nocheck
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5SYETYN5QF');
</script>